const schedule = require('node-schedule');
const moment = require('moment-timezone');
const chalk = require('chalk');

module.exports.config = {
    name: 'autosent',
    version: '10.1.0',
    hasPermssion: 0,
    credits: 'Aman Khan',
    description: 'Set Karne Ke Bad Automatically Msg Send Karega',
    commandCategory: 'group messenger',
    usages: '[]',
    cooldowns: 3
};

// Message set: feminine, caring, hour-appropriate, same visual layout
const messages = [
    { time: '12:00 AM', message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 12:00 ð€ðŒ\nð’ð¨ ð‰ðšð¨ ððš, ðŒðžð«ð¢ ðƒð®ðš ð“ð®ð¦ð¡ðšð«ðž ð’ðšð­ð¡ ð‡ðšð¢ ðŸŒ™\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '1:00 AM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 1:00 ð€ðŒ\nð‡ðšð¥ð¤ðš ðð¥ðšð§ð¤ðžð­ ðŽðð¡ ð‹ð¨, ððžðšðœðž ðŒðž ð’ð¨ ð‰ðšð¨ ðŸ˜´\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '2:00 AM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 2:00 ð€ðŒ\nðƒð¢ð¥ ð‡ðšð¥ð¤ðš ðŠðšð«ð¨, ðð¢ð§ð ð‚ð¡ð®ð¦ ð‹ðž ð“ð®ð¦ð¡ðž âœ¨\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '3:00 AM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 3:00 ð€ðŒ\nð€ðšð§ðš ð€ðšð§ðš ððžðžð§ð, ðŒðžð«ðž ð‹ðšðð¥ðž/ð‹ðšðð¥ð¢ ðŠð¨ ð€ð«ðšð¦ ð‚ð¡ðšð¡ð¢ðž ðŸŒŒ\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '4:00 AM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 4:00 ð€ðŒ\nð‹ðšð¬ð­ ð’ð­ð«ðžð­ðœð¡ ðŽðŸ ðð¢ð ð¡ð­â€”ð‘ðžð¬ð­ ð–ðžð¥ð¥ ðŸ’œ\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '5:00 AM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 5:00 ð€ðŒ\nð’ð®ð›ðšð¡ ðŠð¢ ð‡ðšð°ðš, ððžð° ð‡ð¨ð©ðžâ€”ðŒðžð«ðž ð‹ð¢ðž ð’ð¦ð¢ð¥ðž ðŸŒ…\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '6:00 AM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 6:00 ð€ðŒ\nð€ð¬ð¬ðšð¥ðšð¦ð® ð€ð¥ðšð¢ð¤ð®ð¦/ð†ð¨ð¨ð ðŒð¨ð«ð§ð¢ð§ð , ð‘ð¢ð¬ðž ð’ð¨ðŸð­ð¥ð² ðŸŒ¤ï¸\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '7:00 AM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 7:00 ð€ðŒ\nð”ð­ð¡ð¨ ððš, ð“ð¡ð¨ðð¢ ð–ðšð¥ð¤, ð“ð¡ð¨ðð¢ ð’ð¦ð¢ð¥ðž ðŸ˜Š\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '8:00 AM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 8:00 ð€ðŒ\nð‹ð¢ð ð¡ð­ ðð«ðžðšð¤ðŸðšð¬ð­ ð€ð®ð« ð†ð¨ð¨ð ðŒð¨ð¨ð â˜•ðŸž\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '9:00 AM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 9:00 ð€ðŒ\nðð«ðžðšð¤ðŸðšð¬ð­ ðŠðšð«ð¥ð¨ ð€ð›ð¡ð¢, ðŒðžð«ð¢ ð“ðžðšð¦ ðŠð¢ ð’ð­ðšð« âœ¨\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '10:00 AM', message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 10:00 ð€ðŒ\nð…ð¨ðœð®ð¬ ðŽð§â€”ð˜ð¨ð® ð†ð¨ð­ ð“ð¡ð¢ð¬, ð’ð¦ðšð«ð­ð¢ðž ðŸ’ª\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '11:00 AM', message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 11:00 ð€ðŒ\nð’ð¡ð¨ð«ð­ ðð«ðžðšð¤ ð‹ð¨, ððšð§ð¢ ðð¢ ð‹ð¨ ðŸ’§\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '12:00 PM', message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 12:00 ððŒ\nð†ð¨ð¨ð ð€ðŸð­ðžð«ð§ð¨ð¨ð§, ð’ð¨ðŸð­ ð’ð¦ð¢ð¥ðž ð“ð¨ ððšð§ð­ðš ð‡ðšð¢ ðŸŒž\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '1:00 PM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 1:00 ððŒ\nð‹ð®ð§ðœð¡ ð“ð¢ð¦ðžâ€”ðŠð®ðœð¡ ð‡ðžðšð¥ð­ð¡ð² ðŠð¡ðšð¨ ðŸ¥—\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '2:00 PM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 2:00 ððŒ\nð‹ð¢ð ð¡ð­ ð’ð­ð«ðžð­ðœð¡, ð‹ð¢ð ð¡ð­ ð’ð¦ð¢ð¥ðžâ€”ðŠðšð¦ ð‚ð¡ðšð¥ð­ðš ð‘ðšð¡ðž ðŸ˜Š\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '3:00 PM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 3:00 ððŒ\nð“ð¡ð¨ðð¢ ð‚ð¡ðšð¢/ð‚ð¨ðŸðŸðžðž, ð“ð¡ð¨ððš ð‚ð¡ð¢ð¥ð¥ â˜•\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '4:00 PM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 4:00 ððŒ\nð‹ðšð¬ð­ ðð®ð¬ð¡â€”ðŒðžð«ðž ð‚ð¡ðšð¦ð©, ð˜ð¨ð® ð‚ðšð§ ðƒð¨ ðˆð­ ðŸ’«\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '5:00 PM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 5:00 ððŒ\nð‡ðšð« ð‡ðšð¥ ðŒðž ðŠð¡ð®ð¬ð¡ ð‘ðžð¡ð§ðš, ðŒðžð«ðš ðð«ð¨ð¦ð¢ð¬ðž ðŸ’œ\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '6:00 PM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 6:00 ððŒ\nð„ð¯ðžð§ð¢ð§ð  ðð«ðžðžð³ðž, ðŒð¢ð¥ð ð–ðšð¥ð¤â€”ðŒð¨ð¨ð ð‹ð¢ð ð¡ð­ ðŸŒ‡\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '7:00 PM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 7:00 ððŒ\nð‡ðšð« ðƒð¢ð§ ð“ð®ð¦ ð’ð­ð«ð¨ð§ð , ð€ðšð£ ðð¡ð¢ ðð«ð¨ð®ð ðŽðŸ ð˜ð¨ð® ðŸ«¶\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '8:00 PM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 8:00 ððŒ\nðƒð¢ð§ð§ðžð« ð“ð¢ð¦ðžâ€”ðŒðžð«ðž ð‹ð¢ðž ð„ð¤ ð’ð¦ð¢ð¥ðž ð„ð±ð­ð«ðš ðŸ˜‹\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '9:00 PM',  message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 9:00 ððŒ\nð’ð¥ð¨ð° ðƒð¨ð°ð§, ð‡ðžðšð«ð­ ðŠð¨ ððžðšðœðžâ€”ðˆð­ð¬ ðŽð¤ ðŸ’–\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '10:00 PM', message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 10:00 ððŒ\nð…ð¨ð§ðž ðƒð®ð« ð‘ðšð¤ð¡ð¨, ðŒð¢ð§ð ð‘ðžð¬ð­â€”ð’ð°ðžðžð­ ðƒð«ðžðšð¦ð¬ ðŸŒ™\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' },
    { time: '11:00 PM', message: 'â”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€\nðð¨ð° ð¢ð­ð¬ ð­ð¢ð¦ðž 11:00 ððŒ\nð†ð¨ð¨ð ðð¢ð ð¡ð­, ðŒðžð«ð¢ ð…ðšð¯, ð’ðšðŸðž ð‘ðžð¬ð­ ðŸ¤\nâ”€â”€â”€â”€ â€¢ðŸ’œâ€¢ â”€â”€â”€â”€' }
];

module.exports.onLoad = ({ api }) => {
    console.log(chalk.bold.hex("#00c300")("============ SUCCESFULLY LOADED THE AUTOSENT COMMAND ============"));

    messages.forEach(({ time, message }) => {
        // Parse "H:MM AM/PM"
        const [h, mm, ap] = time.split(/[: ]/);
        let hour24 = parseInt(h, 10);
        const minute = parseInt(mm, 10);

        if (ap === 'PM' && h !== '12') hour24 += 12;
        if (ap === 'AM' && h === '12') hour24 = 0;

        // Schedule to run every day at that time in Asia/Kolkata
        const rule = new schedule.RecurrenceRule();
        rule.tz = 'Asia/Kolkata';
        rule.hour = hour24;
        rule.minute = minute;
        rule.second = 0;

        schedule.scheduleJob(rule, () => {
            if (!global.data || !Array.isArray(global.data.allThreadID)) return;
            global.data.allThreadID.forEach(threadID => {
                api.sendMessage(message, threadID, (error) => {
                    if (error) {
                        console.error(`Failed to send message to ${threadID}:`, error);
                    }
                });
            });
        });
    });
};

module.exports.run = () => {
    // Logic handled in onLoad
};
